{% extends 'base.html' %}
{% block content %}
<div class="products-section">
  <div class="section-header">
    <h2>All Products</h2>
  </div>

  <div class="products">
    {% for p in products %}
    <a href="{% url 'product_detail' p.id %}" class="card">
      <div class="card-img-wrapper">
        {% if p.image %}
        <img src="{{ p.image.url }}" alt="{{ p.name }}" />
        {% else %}
        <i class="fas fa-image fa-3x placeholder-icon"></i>
        {% endif %}
      </div>

      <h3>{{ p.name }}</h3>
      <p>{{ p.description|truncatewords:10 }}</p>

      <div class="card-footer">
        <div class="price-info">
          <span class="item-price">Rs. {{ p.price }}</span>
          <span class="{% if p.stock > 0 %}text-stock{% else %}text-out{% endif %}">
            {% if p.stock > 0 %}{{ p.stock }} in stock{% else %}Out of Stock{% endif %}
          </span>
        </div>
        {% if p.stock > 0 %}
        <div class="btn-primary">
          <i class="fas fa-cart-plus"></i>
        </div>
        {% else %}
        <div class="btn-primary btn-disabled">
          <i class="fas fa-ban"></i>
        </div>
        {% endif %}
      </div>
    </a>
    {% empty %}
    <div class="empty-state">
        <i class="fas fa-search fa-3x"></i>
        <p>No products found.</p>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
